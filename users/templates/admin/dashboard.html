{% extends "base.html" %}

{% block content %}
<div id="user-table" class="container mx-auto p-6" v-cloak>
  <div class="bg-white shadow-xl rounded-lg overflow-hidden">
    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
      <h2 class="text-2xl font-semibold text-gray-800">User Management</h2>
      <p class="text-sm text-gray-500">Manage roles and access levels</p>
    </div>
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y divide-gray-300 rounded-lg border border-gray-200">
        <thead class="bg-gray-100 rounded-t-lg">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide rounded-tl-lg">#</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide">Name</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide">Email</th>
            <!-- <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide">User ID</th> -->
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide">Current Role</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide rounded-tr-lg">Action</th>
          </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
          {% for user in page_obj %}
          <tr class="hover:bg-blue-50 transition duration-200 cursor-pointer">
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-medium">{{ forloop.counter }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold">
              {{ user.first_name }} {{ user.last_name }}
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">{{ user.email }}</td>
            <!-- <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">{{ user.id }}</td> -->
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">{{ user.custom_role.role.name }}</td>
            <td class="px-6 py-4 whitespace-nowrap text-sm">
              <a href="{% url 'assign-role' user.id %}"
                class="inline-block bg-gray-700 text-white px-4 py-2 rounded-md hover:bg-gray-800 transition">
                Change Role
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>


    <!-- Pagination -->
    <div class="px-6 py-4 bg-gray-50 flex justify-between items-center">
      {% if page_obj.has_previous %}
        <a href="?page={{ page_obj.previous_page_number }}"
           class="text-sm bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300">
          ← Previous
        </a>
      {% else %}
        <span></span>
      {% endif %}

      <span class="text-sm text-gray-600">
        Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
      </span>

      {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}"
           class="text-sm bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300">
          Next →
        </a>
      {% else %}
        <span></span>
      {% endif %}
    </div>
  </div>
</div>
{% endblock content %}
